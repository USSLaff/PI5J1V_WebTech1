<!DOCTYPE html>
<html lang="hu">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GEAR</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/showcase.css">


</head>

<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
            <div class="container">
                <a class="navbar-brand" href="index.html">
                    <i class="bi bi-gear-fill"></i> GEAR
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="games.html">Játékok</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="upload_game.html">Játék feltöltése</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="showcase.html">Játékbemutató</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="contact.html">Kapcsolat</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mt-5 pt-4">





        <article class="mb-5">
            <div class="video-info text-center mb-4">
                <h3>Játék bemutató</h3>
                <div class="badge bg-danger mb-3">
                    <i class="fab fa-youtube"></i> YouTube
                </div>
            </div>

            <div class="video-container">
                <div class="youtube-container">
                    <iframe width="560" height="315" id="youtubeVideo"
                        src="https://www.youtube.com/embed/8X2kIfS6fb8?si=8MvxNp-xmB5Grz2N&enablejsapi=1"
                        title="YouTube video player" frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                        referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                </div>
            </div>

            <div class="video-controls">
                <div class="text-center">
                    <div class="btn-group mb-3" role="group">
                        <button id="playBtn" class="btn btn-light">
                            <i class="fas fa-play"></i>
                        </button>
                        <button id="muteBtn" class="btn btn-light">
                            <i class="fas fa-volume-up"></i>
                        </button>
                        <button id="fullscreenBtn" class="btn btn-light">
                            <i class="fas fa-expand"></i>
                        </button>
                    </div>

                    <div class="btn-group mb-3" role="group">
                        <button id="rewindBtn" class="btn btn-outline-light">
                            <i class="fas fa-backward"></i> 10s
                        </button>
                        <button id="forwardBtn" class="btn btn-outline-light">
                            <i class="fas fa-forward"></i> 10s
                        </button>
                        <button id="volumeDown" class="btn btn-outline-light">
                            <i class="fas fa-volume-down"></i> -
                        </button>
                        <button id="volumeUp" class="btn btn-outline-light">
                            <i class="fas fa-volume-up"></i> +
                        </button>
                    </div>

                    <div class="progress">
                        <div id="progressBar" class="progress-bar bg-warning" role="progressbar" style="width: 0%">
                            <span class="visually-hidden">Folyamat</span>
                        </div>
                    </div>

                    <div class="text-white mt-2">
                        <small>
                            <span id="currentTime">0:00</span> /
                            <span id="duration">0:00</span>
                        </small>
                    </div>
                </div>
            </div>
        </article>
    </main>

    <footer class="bg-dark text-light py-4 mt-5">
        <div class="container">

            <hr>
            <div class="row">
                <div class="col-md-6">
                    <h5>Elérhetőség</h5>
                    <p><i class="fas fa-map-marker-alt"></i> Miskolc, Egyetem út 1, 3515</p>
                    <p><i class="fas fa-phone"></i> +36 1 234 5678</p>
                    <p><i class="fas fa-envelope"></i> email.email@email.email</p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>

        var player;
        var isMuted = false;
        var updateInterval;

        function onYouTubeIframeAPIReady() {
            console.log("setting player...")
            player = new YT.Player('youtubeVideo', {
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
            console.log(player)
        }

        function onPlayerReady(event) {
            updatePlayerTime();
            updateInterval = setInterval(updatePlayerTime, 1000);
        }

        function onPlayerStateChange(event) {
            updatePlayPauseButtons();
        }

        function updatePlayerTime() {
            if (player && player.getCurrentTime) {
                const currentTime = player.getCurrentTime();
                const duration = player.getDuration();

                if (duration > 0) {
                    const progress = (currentTime / duration) * 100;
                    $('#progressBar').css('width', progress + '%');
                }

                $('#currentTime').text(formatTime(currentTime));
                $('#duration').text(formatTime(duration));
            }
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return mins + ':' + (secs < 10 ? '0' : '') + secs;
        }

        function updatePlayPauseButtons() {
            if (player && player.getPlayerState) {
                const state = player.getPlayerState();
                if (state === YT.PlayerState.PLAYING) {
                    $('#playBtn').html('<i class="fas fa-pause"></i>');
                } else {
                    $('#playBtn').html('<i class="fas fa-play"></i>');
                }
            }
        }

        $(document).ready(function () {

            onYouTubeIframeAPIReady();

            // Amikor a player kész
            function onPlayerReady(event) {
                console.log('YouTube player kész!');
                updateButtonStates();
            }

            // Amikor a player állapota változik
            function onPlayerStateChange(event) {
                updateButtonStates();
            }

            // Gombok állapotának frissítése
            function updateButtonStates() {
                if (!player) return;

                // Play/Pause gomb ikonjának változtatása
                var playerState = player.getPlayerState();
                if (playerState === YT.PlayerState.PLAYING) {
                    $('#playBtn i').removeClass('fa-play').addClass('fa-pause');
                } else {
                    $('#playBtn i').removeClass('fa-pause').addClass('fa-play');
                }

                // Mute/Unmute gomb ikonjának változtatása
                if (player.isMuted()) {
                    $('#muteBtn i').removeClass('fa-volume-up').addClass('fa-volume-mute');
                } else {
                    $('#muteBtn i').removeClass('fa-volume-mute').addClass('fa-volume-up');
                }
            }

            // Play/Pause gomb
            $('#playBtn').on('click', function () {

                if (!player) return;

                var playerState = player.getPlayerState();
                if (playerState === YT.PlayerState.PLAYING) {
                    player.pauseVideo();
                } else {
                    player.playVideo();
                }
            });

            // Mute/Unmute gomb
            $('#muteBtn').on('click', function () {
                if (!player) return;


                if (player.isMuted()) {
                    player.unMute();
                    $(this).find('i').removeClass('fa-volume-mute').addClass('fa-volume-up');
                } else {
                    player.mute();
                    $(this).find('i').removeClass('fa-volume-up').addClass('fa-volume-mute');
                }
            });

            // Teljes képernyő gomb
            $('#fullscreenBtn').on('click', function () {
                if (!player) return;

                var iframe = document.getElementById('youtubeVideo');
                if (iframe.requestFullscreen) {
                    iframe.requestFullscreen();
                } else if (iframe.webkitRequestFullscreen) {
                    iframe.webkitRequestFullscreen();
                } else if (iframe.mozRequestFullScreen) {
                    iframe.mozRequestFullScreen();
                } else if (iframe.msRequestFullscreen) {
                    iframe.msRequestFullscreen();
                }
            });

            // Visszatekerés 10 másodperccel
            $('#rewindBtn').on('click', function () {

                console.log(player)
                if (!player) return;

                var currentTime = player.getCurrentTime();
                player.seekTo(currentTime - 10, true);

                // Visszatekerés animáció
                $(this).find('i').addClass('text-primary');
                setTimeout(() => {
                    $(this).find('i').removeClass('text-primary');
                }, 300);
            });

            // Előretekerés 10 másodperccel
            $('#forwardBtn').on('click', function () {
                if (!player) return;

                var currentTime = player.getCurrentTime();
                player.seekTo(currentTime + 10, true);

                // Előretekerés animáció
                $(this).find('i').addClass('text-success');
                setTimeout(() => {
                    $(this).find('i').removeClass('text-success');
                }, 300);
            });

            // Hangerő csökkentése
            $('#volumeDown').on('click', function () {
                if (!player) return;

                var currentVolume = player.getVolume();
                var newVolume = Math.max(0, currentVolume - 10);
                player.setVolume(newVolume);

                // Feedback animáció
                $(this).find('i').addClass('text-warning');
                setTimeout(() => {
                    $(this).find('i').removeClass('text-warning');
                }, 300);
            });

            // Hangerő növelése
            $('#volumeUp').on('click', function () {
                if (!player) return;

                var currentVolume = player.getVolume();
                var newVolume = Math.min(100, currentVolume + 10);
                player.setVolume(newVolume);

                // Feedback animáció
                $(this).find('i').addClass('text-info');
                setTimeout(() => {
                    $(this).find('i').removeClass('text-info');
                }, 300);
            });

            $('.progress').click(function (e) {
                if (player && player.getDuration) {
                    const offset = $(this).offset();
                    const width = $(this).width();
                    const clickX = e.pageX - offset.left;
                    const percentage = clickX / width;
                    const newTime = player.getDuration() * percentage;
                    player.seekTo(newTime, true);
                }
            });
            // Idő frissítése másodpercenként
            setInterval(updateTimeDisplay, 1000);

        });
    </script>
</body>

</html>